<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¤ì‹œê°„ ë‚ ì”¨ ì•±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .search-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
        }

        .search-input {
            padding: 15px 20px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            width: 300px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            outline: none;
        }

        .search-btn, .location-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 25px;
            background: #00b894;
            color: white;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .search-btn:hover, .location-btn:hover {
            background: #00a085;
            transform: translateY(-2px);
        }

        .weather-main {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .current-weather {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .weather-info {
            flex: 1;
        }

        .city-name {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #2d3436;
        }

        .temperature {
            font-size: 4rem;
            font-weight: bold;
            color: #0984e3;
            margin-bottom: 10px;
        }

        .description {
            font-size: 1.2rem;
            color: #636e72;
            text-transform: capitalize;
        }

        .weather-icon {
            font-size: 6rem;
        }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .detail-item {
            text-align: center;
            padding: 15px;
            background: rgba(116, 185, 255, 0.1);
            border-radius: 10px;
        }

        .detail-label {
            font-size: 0.9rem;
            color: #636e72;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2d3436;
        }

        .forecast-container {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .forecast-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
            color: #2d3436;
        }

        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .forecast-item {
            background: rgba(116, 185, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s;
        }

        .forecast-item:hover {
            transform: translateY(-5px);
        }

        .forecast-date {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2d3436;
        }

        .forecast-icon {
            font-size: 2.5rem;
            margin: 10px 0;
        }

        .forecast-temp {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .forecast-desc {
            font-size: 0.9rem;
            color: #636e72;
            text-transform: capitalize;
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.2rem;
            margin: 50px 0;
        }

        .error {
            background: #ff7675;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .recent-searches {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .recent-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #2d3436;
        }

        .recent-item {
            display: inline-block;
            background: #74b9ff;
            color: white;
            padding: 8px 15px;
            margin: 5px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .recent-item:hover {
            background: #0984e3;
        }

        @media (max-width: 768px) {
            .search-input {
                width: 250px;
            }
            
            .current-weather {
                text-align: center;
            }
            
            .temperature {
                font-size: 3rem;
            }
            
            .weather-icon {
                font-size: 4rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŒ¤ï¸ ì‹¤ì‹œê°„ ë‚ ì”¨</h1>
        </div>

        <div class="search-container">
            <input type="text" class="search-input" placeholder="ë„ì‹œëª…ì„ ì…ë ¥í•˜ì„¸ìš”..." id="cityInput">
            <button class="search-btn" onclick="searchWeather()">ê²€ìƒ‰</button>
            <button class="location-btn" onclick="getCurrentLocation()">í˜„ì¬ ìœ„ì¹˜</button>
        </div>

        <div id="recentSearches" class="recent-searches" style="display: none;">
            <div class="recent-title">ìµœê·¼ ê²€ìƒ‰</div>
            <div id="recentList"></div>
        </div>

        <div id="loading" class="loading" style="display: none;">
            ë‚ ì”¨ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
        </div>

        <div id="error" class="error" style="display: none;"></div>

        <div id="weatherMain" class="weather-main" style="display: none;">
            <div class="current-weather">
                <div class="weather-info">
                    <div class="city-name" id="cityName"></div>
                    <div class="temperature" id="temperature"></div>
                    <div class="description" id="description"></div>
                </div>
                <div class="weather-icon" id="weatherIcon"></div>
            </div>
            
            <div class="weather-details">
                <div class="detail-item">
                    <div class="detail-label">ì²´ê°ì˜¨ë„</div>
                    <div class="detail-value" id="feelsLike"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">ìŠµë„</div>
                    <div class="detail-value" id="humidity"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">í’ì†</div>
                    <div class="detail-value" id="windSpeed"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">ê¸°ì••</div>
                    <div class="detail-value" id="pressure"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">ê°€ì‹œê±°ë¦¬</div>
                    <div class="detail-value" id="visibility"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">ìì™¸ì„  ì§€ìˆ˜</div>
                    <div class="detail-value" id="uvIndex"></div>
                </div>
            </div>
        </div>

        <div id="forecastContainer" class="forecast-container" style="display: none;">
            <div class="forecast-title">5ì¼ ë‚ ì”¨ ì˜ˆë³´</div>
            <div class="forecast-grid" id="forecastGrid"></div>
        </div>
    </div>

    <script>
        // API í‚¤ - ì‹¤ì œ ì‚¬ìš©ì‹œì—ëŠ” ë³¸ì¸ì˜ OpenWeather API í‚¤ë¡œ êµì²´í•´ì•¼ í•©ë‹ˆë‹¤
        const API_KEY = 'YOUR_API_KEY_HERE';
        const BASE_URL = 'https://api.openweathermap.org/data/2.5';
        
        // ìµœê·¼ ê²€ìƒ‰ ê¸°ë¡ì„ ì €ì¥í•  ë³€ìˆ˜ (LocalStorage ëŒ€ì‹  ë©”ëª¨ë¦¬ ì‚¬ìš©)
        let recentSearches = [];

        // í˜ì´ì§€ ë¡œë“œì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            // Enter í‚¤ë¡œ ê²€ìƒ‰ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
            document.getElementById('cityInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchWeather();
                }
            });
            
            // ë°ëª¨ìš© API í‚¤ ì•ˆë‚´
            if (API_KEY === 'YOUR_API_KEY_HERE') {
                showError('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. OpenWeather API í‚¤ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì„œìš¸ ë‚ ì”¨ë¥¼ ê¸°ë³¸ìœ¼ë¡œ í‘œì‹œ
            getWeather('Seoul');
        });

        // ë„ì‹œ ê²€ìƒ‰
        function searchWeather() {
            const cityName = document.getElementById('cityInput').value.trim();
            if (cityName) {
                getWeather(cityName);
                addToRecentSearches(cityName);
                document.getElementById('cityInput').value = '';
            }
        }

        // í˜„ì¬ ìœ„ì¹˜ ë‚ ì”¨
        function getCurrentLocation() {
            if (navigator.geolocation) {
                showLoading(true);
                navigator.geolocation.getCurrentPosition(
                    position => {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        getWeatherByCoords(lat, lon);
                    },
                    error => {
                        showError('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                        showLoading(false);
                    }
                );
            } else {
                showError('ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        // ë„ì‹œëª…ìœ¼ë¡œ ë‚ ì”¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        async function getWeather(cityName) {
            showLoading(true);
            try {
                const response = await fetch(`${BASE_URL}/weather?q=${cityName}&appid=${API_KEY}&units=metric&lang=kr`);
                if (!response.ok) {
                    throw new Error('ë„ì‹œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                const data = await response.json();
                displayCurrentWeather(data);
                getForecast(data.coord.lat, data.coord.lon);
            } catch (error) {
                showError(error.message);
                showLoading(false);
            }
        }

        // ì¢Œí‘œë¡œ ë‚ ì”¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        async function getWeatherByCoords(lat, lon) {
            try {
                const response = await fetch(`${BASE_URL}/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=kr`);
                if (!response.ok) {
                    throw new Error('ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                const data = await response.json();
                displayCurrentWeather(data);
                getForecast(lat, lon);
                addToRecentSearches(data.name);
            } catch (error) {
                showError(error.message);
                showLoading(false);
            }
        }

        // 5ì¼ ì˜ˆë³´ ê°€ì ¸ì˜¤ê¸°
        async function getForecast(lat, lon) {
            try {
                const response = await fetch(`${BASE_URL}/forecast?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=kr`);
                if (!response.ok) {
                    throw new Error('ì˜ˆë³´ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                const data = await response.json();
                displayForecast(data);
                showLoading(false);
            } catch (error) {
                showError(error.message);
                showLoading(false);
            }
        }

        // í˜„ì¬ ë‚ ì”¨ í‘œì‹œ
        function displayCurrentWeather(data) {
            document.getElementById('cityName').textContent = `${data.name}, ${data.sys.country}`;
            document.getElementById('temperature').textContent = `${Math.round(data.main.temp)}Â°C`;
            document.getElementById('description').textContent = data.weather[0].description;
            document.getElementById('weatherIcon').textContent = getWeatherEmoji(data.weather[0].icon);
            
            document.getElementById('feelsLike').textContent = `${Math.round(data.main.feels_like)}Â°C`;
            document.getElementById('humidity').textContent = `${data.main.humidity}%`;
            document.getElementById('windSpeed').textContent = `${data.wind.speed} m/s`;
            document.getElementById('pressure').textContent = `${data.main.pressure} hPa`;
            document.getElementById('visibility').textContent = `${(data.visibility / 1000).toFixed(1)} km`;
            
            // UV ì¸ë±ìŠ¤ëŠ” ë³„ë„ API í˜¸ì¶œì´ í•„ìš”í•˜ë¯€ë¡œ ì„ì‹œê°’
            document.getElementById('uvIndex').textContent = 'N/A';
            
            document.getElementById('weatherMain').style.display = 'block';
        }

        // 5ì¼ ì˜ˆë³´ í‘œì‹œ
        function displayForecast(data) {
            const forecastGrid = document.getElementById('forecastGrid');
            forecastGrid.innerHTML = '';
            
            // ë§¤ì¼ í•˜ë‚˜ì”©ë§Œ í‘œì‹œ (ì •ì˜¤ ì‹œê°„ëŒ€ ê¸°ì¤€)
            const dailyForecasts = {};
            data.list.forEach(item => {
                const date = new Date(item.dt * 1000);
                const dateKey = date.toDateString();
                
                if (!dailyForecasts[dateKey] || date.getHours() === 12) {
                    dailyForecasts[dateKey] = item;
                }
            });
            
            const forecasts = Object.values(dailyForecasts).slice(0, 5);
            
            forecasts.forEach(item => {
                const date = new Date(item.dt * 1000);
                const forecastItem = document.createElement('div');
                forecastItem.className = 'forecast-item';
                
                forecastItem.innerHTML = `
                    <div class="forecast-date">${formatDate(date)}</div>
                    <div class="forecast-icon">${getWeatherEmoji(item.weather[0].icon)}</div>
                    <div class="forecast-temp">${Math.round(item.main.temp)}Â°C</div>
                    <div class="forecast-desc">${item.weather[0].description}</div>
                `;
                
                forecastGrid.appendChild(forecastItem);
            });
            
            document.getElementById('forecastContainer').style.display = 'block';
        }

        // ìµœê·¼ ê²€ìƒ‰ì— ì¶”ê°€
        function addToRecentSearches(cityName) {
            if (!recentSearches.includes(cityName)) {
                recentSearches.unshift(cityName);
                if (recentSearches.length > 5) {
                    recentSearches.pop();
                }
                displayRecentSearches();
            }
        }

        // ìµœê·¼ ê²€ìƒ‰ í‘œì‹œ
        function displayRecentSearches() {
            if (recentSearches.length > 0) {
                const recentList = document.getElementById('recentList');
                recentList.innerHTML = recentSearches.map(city => 
                    `<span class="recent-item" onclick="getWeather('${city}')">${city}</span>`
                ).join('');
                document.getElementById('recentSearches').style.display = 'block';
            }
        }

        // ë‚ ì”¨ ì•„ì´ì½˜ì„ ì´ëª¨ì§€ë¡œ ë³€í™˜
        function getWeatherEmoji(iconCode) {
            const iconMap = {
                '01d': 'â˜€ï¸', '01n': 'ğŸŒ™',
                '02d': 'â›…', '02n': 'â˜ï¸',
                '03d': 'â˜ï¸', '03n': 'â˜ï¸',
                '04d': 'â˜ï¸', '04n': 'â˜ï¸',
                '09d': 'ğŸŒ§ï¸', '09n': 'ğŸŒ§ï¸',
                '10d': 'ğŸŒ¦ï¸', '10n': 'ğŸŒ¦ï¸',
                '11d': 'â›ˆï¸', '11n': 'â›ˆï¸',
                '13d': 'â„ï¸', '13n': 'â„ï¸',
                '50d': 'ğŸŒ«ï¸', '50n': 'ğŸŒ«ï¸'
            };
            return iconMap[iconCode] || 'ğŸŒ¤ï¸';
        }

        // ë‚ ì§œ í¬ë§·
        function formatDate(date) {
            const options = { 
                month: 'short', 
                day: 'numeric',
                weekday: 'short'
            };
            return date.toLocaleDateString('ko-KR', options);
        }

        // ë¡œë”© í‘œì‹œ
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
            if (!show) {
                document.getElementById('error').style.display = 'none';
            }
        }

        // ì—ëŸ¬ í‘œì‹œ
        function showError(message) {
            document.getElementById('error').textContent = message;
            document.getElementById('error').style.display = 'block';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('weatherMain').style.display = 'none';
            document.getElementById('forecastContainer').style.display = 'none';
        }
    </script>
</body>
</html>